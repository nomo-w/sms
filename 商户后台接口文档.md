## 商户后台接口文档
>维护人员：**nomo-w**
>创建时间：2020-03-30

>>> + 登录
>>> + 登出
>>> + 更改当前用户密码
>>> + 添加用户
>>> + 删除用户
>>> + 获取所有用户
>>> + 获取短信队列状态
>>> + 开启短信发送队列
>>> + 关闭短信发送队列
>>> + 获取所有白名单
>>> + 添加白名单
>>> + 删除白名单
>>> + 获取发送队列数量
>>> + 清空发送队列
>>> + 统计信息
>>> + 统计趋势
>>> + 查询所有信息
>>> + 查询所有通道
>>> + 查询历史记录
>>> + 查询充值记录
>>> + 群发
>>> + 查询通道模板


### 基础路径
> base URL：xxxx.com
### 请求头
>**Content-Type: application/x-www-form-urlencoded**

#### 接口说明 **登录**
- **API接口**
>**/user/login**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user|   str|  用户名|
| password|  str|  密码|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| status      |   int |  200(成功)/500(失败)|

- **返回成功示例**
>    
```python 
{
    "data": "登陆成功!",
    "status": 200
}
```


#### 接口说明 **登出**
>**无参数**
- **API接口**
>**/user/logout**
- **请求方式** 
>**POST**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| status      |   int |  200(成功)/500(失败)|

- **返回成功示例**
>    
```python 
{
    "data": "登出!",
    "status": 200
}
```


#### 接口说明 **更改当前用户密码**
- **API接口**
>**/user/change_self_password**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| password|  str|  新密码|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| status      |   int |  200(成功)/500(失败)|

- **返回成功示例**
>    
```python 
{
    "data": "修改成功!",
    "status": 200
}
```


#### 接口说明 **添加用户**
- **API接口**
>**/user/add**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| password|  str|  密码|
| user|  str|  用户名|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| status      |   int |  200(成功)/500(失败)|

- **返回成功示例**
>    
```python 
{
    "data": "添加成功!",
    "status": 200
}
```


#### 接口说明 **删除用户**
- **API接口**
>**/user/del_by_id**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user_id|  str|  用户名id|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| status      |   int |  200(成功)/500(失败)|

- **返回成功示例**
>    
```python 
{
    "data": "成功删除!",
    "status": 200
}
```


#### 接口说明 **获取所有用户**
>**无参数**
- **API接口**
>**/user/get_all**
- **请求方法**
>**GET**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|
| data内参数说明|||
| id | int | 用户id|
| name | str | 用户名|
| auth | str | 用户权限|
| create_time | str | 创建时间|

- **返回成功示例**
>    
```python 
{
    "data": [
        {
            "id": 5,
            "name": "yl_admin",
            "auth": "admin",
            "create_time": "2020-02-20 11:53:11"
        },
        {
            "id": 11,
            "name": "yl_admin1111",
            "auth": "user",
            "create_time": "2020-03-30 13:03:03"
        }
    ],
    "status": 200
}
```


#### 接口说明 **获取短信队列状态**
>**无参数**
- **API接口**
>**/main/is_running**
- **请求方法**
>**GET**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  0(未运行)/1(正在运行)|

- **返回成功示例**
>    
```python 
{
    "data": 0,
    "status": 200
}
```


#### 接口说明 **开启短信发送队列**
>**无参数**
- **API接口**
>**/main/start**
- **请求方法**
>**POST**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|

- **返回成功示例**
>    
```python 
{
    "data": "启动成功",
    "status": 200
}
```


#### 接口说明 **关闭短信发送队列**
>**无参数**
- **API接口**
>**/main/stop**
- **请求方法**
>**POST**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|

- **返回成功示例**
>    
```python 
{
    "data": "停止成功!",
    "status": 200
}
```


#### 接口说明 **获取所有白名单**
>**无参数**
- **API接口**
>**/white_ip/get_all**
- **请求方法**
>**GET**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|
| data内参数说明|||
| id | int | 白名单id|
| ip | str | 白名单|
| memo | str | 备注|

- **返回成功示例**
>    
```python 
{
    "data": [
        {
            "id": 7,
            "ip": "124.105.80.42",
            "memo": "办公室"
        },
        {
            "id": 12,
            "ip": "43.226.16.201",
            "memo": "jay"
        }
    ],
    "status": 200
}
```


#### 接口说明 **添加白名单**
- **API接口**
>**/white_ip/add**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| ip|  str|  白名单|
| memo|  str|  备注|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|

- **返回成功示例**
>    
```python 
{
    "data": "添加成功!",
    "status": 200
}
```


#### 接口说明 **删除白名单**
- **API接口**
>**/white_ip/del_by_id**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| id|  str|  白名单id|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|

- **返回成功示例**
>    
```python 
{
    "data": "删除成功!",
    "status": 200
}
```


#### 接口说明 **获取发送队列数量**
>**无参数**
- **API接口**
>**/queue/get_count**
- **请求方法**
>**GET**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  队列数量|

- **返回成功示例**
>    
```python 
{
    "data": 0,
    "status": 200
}
```


#### 接口说明 **清空发送队列**
>**无参数**
- **API接口**
>**/queue/empty**
- **请求方法**
>**POST**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  队列数量|

- **返回成功示例**
>    
```python 
{
    "data": 0,
    "status": 200
}
```


#### 接口说明 **统计信息**
>**返回一个多少天之间的统计，展示在统计信息页面**
- **API接口**
>**/search/days**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| start|  str|  开始日期2020-02-29|
| end|  str|  结束日期2020-03-30|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  队列数量|
| data内参数说明|||
| all_count | int | 发送总数|
| suc_count | int | 成功数|
| price_sum | int | 总花费|

- **返回成功示例**
>    
```python 
{
    "data": {
        "all_count": 14,
        "suc_count": 2,
        "price_sum": 0.72
    },
    "status": 200
}
```


#### 接口说明 **统计趋势**
>**返回一个多少天之间的，每天的数据统计**
- **API接口**
>**/search/group_days**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| start|  str|  开始日期2020-02-29|
| end|  str|  结束日期2020-03-30|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  队列数量|
| data内参数说明|||
| success_sum | int | 成功数|
| price | int | 金额|
| date | str | 日期|

- **返回成功示例**
>    
```python 
{
    "data": [
        {
            "success_sum": 2,
            "price": 0.72,
            "date": "2020-03-30"
        }
    ],
    "status": 200
}
```


#### 接口说明 **查询所有信息**
>**查询可用余额，用来展示在个人页面的,无参数**
- **API接口**
>**/search/all**
- **请求方法**
>**GET**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  队列数量|
| data内参数说明|||
| all_count | int | 发送总数|
| suc_count | int | 成功数|
| all_balance | int | 可用余额|

- **返回成功示例**
>    
```python 
{
    "data": {
        "all_count": 19,
        "suc_count": 4,
        "all_balance": 0.08
    },
    "status": 200
}
```


#### 接口说明 **查询所有通道**
>**无参数**
- **API接口**
>**/search/all_channels**
- **请求方法**
>**GET**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  队列数量|
| data内参数说明|||
| id | int | 通道id|
| name | str | 通道名|
| rate | float | 通道费率|

- **返回成功示例**
>    
```python 
{
    "data": [
        {
            "id": 1,
            "name": "axflix",
            "rate": 0.36
        }
    ],
    "status": 200
}
```


#### 接口说明 **查询历史记录**
>**所有参数都不是必须的**
- **API接口**
>**/search/history**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| number|  str|  电话号码|
| start|  str|  开始日期2020-03-25 00:00:00|
| end|  str|  结束日期2020-04-30 11:59:59|
| page|  str|  页数|
| status|  str|  状态(0为搜索成功/1为搜索失败)|
| excel|  str|  导出excel(0代表需要导出)|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  队列数量|
| data内参数说明|||
| total | int | 总条数|
| page_list | list | 页数列表|
| value_list | list | 短信数据|
| value_list内参数说明| ||
| id | int | 短信id |
| user | str | 发送用户 |
| text | str | 短信内容 |
| status | str | 状态 |
| time | str | 发送时间 |
| to_number | str | 手机号 |
| is_click | str | 是否点击 |

- **返回成功示例**
>    
```python 
{
    "data": {
        "value_list": [
            {
                "id": 168,
                "user": "yl_admin",
                "text": "cdeeshi",
                "status": "error to-number",
                "time": "2020-03-30 12:08:42",
                "to_number": "123122",
                "is_click": "已点击"
            },
            {
                "id": 164,
                "user": "yl_admin",
                "text": "cdeeshi",
                "status": "error to-number",
                "time": "2020-03-30 12:08:41",
                "to_number": "fefefe223323432",
                "is_click": "未点击"
            }
        ],
        "page_list": [
            1,
            2
        ],
        "total": 19
    },
    "status": 200
}
```


#### 接口说明 **查询充值记录**
>**所有参数都不是必须的**
- **API接口**
>**/search/recharge_record**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| start|  str|  开始日期2020-03-25 00:00:00|
| end|  str|  结束日期2020-04-30 11:59:59|
| page|  str|  页数|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  队列数量|
| data内参数说明|||
| total | int | 总条数|
| page_list | list | 页数列表|
| value_list | list | 短信数据|
| value_list内参数说明| ||
| balance_after | float | 充值后可用余额 |
| recharge_amount | float | 充值金额 |
| recharge_time | str | 充值时间 |

- **返回成功示例**
>    
```python 
{
    "data": {
        "value_list": [
            {
               "balance_after": 2040.0,
               "recharge_amount": 2000.0,
               "recharge_time": "2020-02-27 16:37:34"
             }
        ],
        "page_list": [
            1
        ],
        "total": 0
    },
    "status": 200
}
```


#### 接口说明 **群发**
- **API接口**
>**/upload/phone_file**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| sms_text|  str|  短信|
| channel_id|  str|  通道id|
| file|  file|  群发手机号文件|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  队列数量|

- **返回成功示例**
>    
```python 
{
    "data": "上传完成",
    "status": 200
}
```


#### 接口说明 **查询通道模板**
- **API接口**
>**/api/search/template**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| channel_id|   str|  通道id|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   list |  模板列表|
| status      |   int |  200(成功)/500(失败)|

- **返回成功示例**
>    
```python 
{
    "data": [
        "测试接口"
    ],
    "status": 200
}
```