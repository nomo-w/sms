## 管理总后台接口文档
>维护人员：**nomo-w**
>创建时间：2020-04-05

>>> + 登录
>>> + 登出
>>> + 根据平台id获取用户
>>> + 添加用户
>>> + 删除用户
>>> + 修改用户密码
>>> + 获取所有平台
>>> + 充值
>>> + 创建平台
>>> + 修改平台数据
>>> + 获取所有通道
>>> + 修改通道数据
>>> + 根据平台id获取白名单
>>> + 添加白名单
>>> + 删除白名单
>>> + 查询所有模板
>>> + 创建模板
>>> + 批量删除模板
>>> + 查询需要添加模板的通道


### 基础路径
> base URL：xxxx.com
### 请求头
>**Content-Type: application/x-www-form-urlencoded**

#### 接口说明 **登录**
- **API接口**
>**/backstage/login**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user|   str|  用户名|
| password|  str|  密码|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| status      |   int |  200(成功)/500(失败)|

- **返回成功示例**
>    
```python 
{
    "data": "登陆成功!",
    "status": 200
}
```


#### 接口说明 **登出**
>**无参数**
- **API接口**
>**/user/logout**
- **请求方式** 
>**POST**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| status      |   int |  200(成功)/500(失败)|

- **返回成功示例**
>    
```python 
{
    "data": "登出!",
    "status": 200
}
```


#### 接口说明 **根据平台id获取用户**
- **API接口**
>**/backstage/userInfo**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| plateform_id|   int|  平台id|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   list |  数据|
| status      |   int |  200(成功)/500(失败)|
| data内参数说明| ||
| user_id | int | 用户id |
| user_name | str | 用户名 |
| auth | str | 用户权限 |
| create_time | str | 创建时间 |

- **返回成功示例**
>    
```python 
{
    "data": [
        {
            "user_id": 2,
            "user_name": "user",
            "auth": "admin",
            "create_time": "2020-02-15 17:25:29"
        },
        {
            "user_id": 4,
            "user_name": "xpj_admin",
            "auth": "admin",
            "create_time": "2020-02-19 16:39:51"
        },
        {
            "user_id": 14,
            "user_name": "xpj_test",
            "auth": "user",
            "create_time": "2020-04-03 12:06:39"
        }
    ],
    "status": 200
}
```


#### 接口说明 **添加用户**
- **API接口**
>**/backstage/useradd**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| password |  str|  密码|
| user |  str|  用户名|
| plateform_id |  int |  平台id |
| auth |  str |  用户权限 |

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| status      |   int |  200(成功)/500(失败)|

- **返回成功示例**
>    
```python 
{
    "data": "添加成功!",
    "status": 200
}
```


#### 接口说明 **删除用户**
- **API接口**
>**/backstage/userdel**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user_id|  str|  用户名id|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| status      |   int |  200(成功)/500(失败)|

- **返回成功示例**
>    
```python 
{
    "data": "成功删除!",
    "status": 200
}
```


#### 接口说明 **修改用户密码**
- **API接口**
>**/backstage/newpassword**
- **请求方法**
>**GET**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| user_id|  int|  用户名id|
| password|  str|  新密码|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据||

- **返回成功示例**
>    
```python 
{
    "data": "删除成功!",
    "status": 200
}
```


#### 接口说明 **获取所有平台**
>**无参数**
- **API接口**
>**/backstage/plateformInfo**
- **请求方法**
>**GET**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    | list | 数据 |
| data内参数说明| ||
| id | int | 平台id |
| name | str | 平台名 |
| create_time | str | 创建时间 |
| balance | float | 平台余额 |
| domain | str | 平台绑定的域名 |

- **返回成功示例**
>    
```python 
{
    "data": [
        {
            "id": 1,
            "name": "新葡京",
            "create_time": "2020-02-19 16:19:15",
            "balance": 0.14,
            "domain": ""
        },
        {
            "id": 2,
            "name": "亦博",
            "create_time": "2020-02-19 16:19:38",
            "balance": 0.35,
            "domain": ""
        },
        {
            "id": 3,
            "name": "yalian",
            "create_time": "2020-02-19 16:20:35",
            "balance": 9.92,
            "domain": "demo.snakejoy.net"
        },
        {
            "id": 4,
            "name": "测试平台",
            "create_time": "2020-02-26 17:36:23",
            "balance": 0.36,
            "domain": ""
        }
    "status": 200
}
```


#### 接口说明 **充值**
- **API接口**
>**/backstage/recharge**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| amount| float | 充值金额 |
| plateform_id | int | 平台id |

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|

- **返回成功示例**
>    
```python 
{
    "data": "充值成功!",
    "status": 200
}
```


#### 接口说明 **创建平台**
- **API接口**
>**/backstage/createPlateform**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| name| str | 平台名 |
| domain | str | 平台绑定的域名 |

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|

- **返回成功示例**
>    
```python 
{
    "data": "添加成功!",
    "status": 200
}
```


#### 接口说明 **修改平台数据**
- **API接口**
>**/backstage/updatePlateform**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| name| str | 平台名 |
| domain | str | 平台绑定的域名 |
| plateform_id | int | 平台id |

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|

- **返回成功示例**
>    
```python 
{
    "data": "更改成功!",
    "status": 200
}
```


#### 接口说明 **获取所有通道**
>**无参数**
- **API接口**
>**/backstage/channelInfo**
- **请求方法**
>**GET**

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|
| data内参数说明| ||
| id | int |通道id|
| name | str |通道名|
| rate | float |通道费率|
| description | str |通道描述|
| is_active | int |通道是否开启 1(开启)/0(关闭)|

- **返回成功示例**
>    
```python 
{
    "data": [
        {
            "id": 1,
            "name": "axflix",
            "rate": 0.36,
            "description": "first channel",
            "is_active": 1
        },
        {
            "id": 2,
            "name": "领道易",
            "rate": 0.36,
            "description": "单次最多3000条",
            "is_active": 1
        },
        {
            "id": 3,
            "name": "dichiyun",
            "rate": 0.36,
            "description": "单次最少1w条",
            "is_active": 1
        }
    ],
    "status": 200
}
```


#### 接口说明 **修改通道数据**
- **API接口**
>**/backstage/updateChannel**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| channel_id|  int|  通道id|
| name|  str|  通道名|
| rate|  float|  通道费率|
| description|  str|  通道描述|
| is_active|  int|  通道是否开启 1(开启)/0(关闭)|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|

- **返回成功示例**
>    
```python 
{
    "data": "修改成功!",
    "status": 200
}
```


#### 接口说明 **根据平台id获取白名单**
- **API接口**
>**/backstage/whitelist**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| plateform_id|  int|  平台id|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   list |  数组|
| data内参数说明| ||
|ip_id|int|白名单id|
|ip|str|白名单|
|memo|str|白名单备注|
|create_time|str|创建时间|

- **返回成功示例**
>    
```python 
{
    "data": [
        {
            "ip_id": 7,
            "ip": "124.105.80.42",
            "memo": "办公室",
            "create_time": "2020-02-20 15:25:35"
        },
        {
            "ip_id": 12,
            "ip": "43.226.16.201",
            "memo": "jay",
            "create_time": "2020-03-30 11:31:26"
        }
    ],
    "status": 200
}
```


#### 接口说明 **添加白名单**
- **API接口**
>**/backstage/addWhitelist**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| ip|  str|  白名单|
| memo|  str|  白名单备注|
| plateform_id|  int|  平台id|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|

- **返回成功示例**
>    
```python 
{
    "data": "添加成功!",
    "status": 200
}
```


#### 接口说明 **删除白名单**
- **API接口**
>**/backstage/delWhitelist**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| whitelist_id|  int|  白名单id|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| status      |   int |  200(成功)/500(失败)|
| data    |   str |  数据|

- **返回成功示例**
>    
```python 
{
    "data": "删除成功!",
    "status": 200
}
```


#### 接口说明 **查询所有模板**
- **API接口**
>**/backstage/showTemplates**
- **请求方法**
>**GET**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
|无请求参数|||

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| id | str | 模板id|
| template | str | 模板内容|
| status | str | 模板状态|
| create_time | str | 模板创建时间|
| channel_name | str | 模板对应的通道|
| plateform_name | str | 模板对应的平台|
| status      |   int |  200(成功)/500(失败)|

- **返回失败示例**
>    
```python 
{
    "data": [
        {
            "id": 5,
            "template": "测试接口3",
            "status": "PENDING",
            "create_time": "2020-07-14 20:59:45",
            "channel_name": "sms123",
            "plateform_name": "新葡京测试"
        }
    ],
    "status": 200
}
```


#### 接口说明 **创建模板**
- **API接口**
>**/backstage/addTemplates**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
|channel_id| str| 通道id|
|plateform_id| str| 平台id|
|channel_type| str| 通道类型|
|template| str| 模板内容|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| status      |   int |  200(成功)/500(失败)|

- **返回失败示例**
>    
```python 
{
    "data": "创建成功!",
    "status": 200
}
```


#### 接口说明 **批量删除模板**
- **API接口**
>**/backstage/delTemplates**
- **请求方法**
>**POST**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
|templates_id| str| 模板id/多个id用,连接|

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   str |  数据|
| status      |   int |  200(成功)/500(失败)|

- **返回失败示例**
>    
```python 
{
    "data": "删除成功!",
    "status": 200
}
```


#### 接口说明 **查询需要添加模板的通道**
- **API接口**
>**/backstage/getTemplateChannel**
- **请求方法**
>**GET**

- **请求参数**
> 
| 请求参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
|无参数|||

- **返回参数**
> 
| 返回参数      |     参数类型 |   参数说明   |
| :-------- | :--------| :------ |
| data    |   通道列表 |  数据|
| id| str| 通道id|
| name| str| 通道名|
| channel_type| str| 通道类型|
| status      |   int |  200(成功)/500(失败)|

- **返回失败示例**
>    
```python 
{
    "data": [
        {
            "id": 8,
            "name": "sms123",
            "channel_type": "http_sms123"
        }
    ],
    "status": 200
}
```