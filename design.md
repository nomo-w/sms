# 设计

@逻辑
1. 上传手机号码或调用接口 / 内容到redis
2. 根据平台数量开启N个短信发送线程，从redis中获取短信并发送.每个线程单次最大发送100条然后重新创建新的线程发送.以免线程卡住出现的程序崩溃.
3. 单独开启一个进程处理短信商返回的发送结果.
4. 创建平台会自动创建对应的nginx配置，每个平台有单独的域名
5. 通道关闭后在平台页面无法显示


@功能
1. 登陆
2. 登出
3. 导入手机号码/短信内容/通道选择/替换自定义url
4. 获取当前发送统计信息 (总--成功数量--花费)
5. 获取历史发送数据统计信息 (全部/月/周/天) (成功数量--花费)
6. 搜索 (具体某日<- 接收手机号)
7. 开始/暂停发送队列
8. 获取队列状态
8. 余额查询，不足时停止队列，并且无法启动队列
9. IP白名单
10. 修改密码
11. 上传文件 + 上传时编辑对应短信
12. 发送历史记录搜索，根据 通道/日期/短信状态/手机号 进行对应搜索.异步返回数据,分页显示
13. 根据搜索记录导出对应的历史记录excel表格
14. 充值记录的查询
15. 帐号管理


@总后台功能
1. 登陆
2. 登出
3. 显示所有通道详细信息
4. 暂停/修改 通道
5. 显示所有平台详细信息
6. 创建/暂停/修改/充值 平台
7. 添加用户/删除用户 平台
8. 添加白名单/删除白名单 平台
9. 手工发送通道的短信导出/更新状态/查看


@数据库 - ( 具体定义在sms.sql中 )
users                       ->  用户
white_list                  ->  白名单配置
sms_config                  ->  sms配置
sms_pending                 ->  正在发送期内的短讯表
sms_plateformid_history     ->  发送历史


@API
.开始/停止      - 状态
.用户系统       - 登入/登出/新建/修改密码/余额查询
.白名单         - 获取/新建/删除
.当前发送队列    - 列队数量（大点的字跳动显示）
.历史查询       - 总统计/一段时间内/一段时间内每天（用于图表）/ 详细: 某个号码/失败的